<!-- sldsValidatorIgnore -->
<template>
    <template if:true={state.showRelatedList}>
        <lightning-layout class="slds-m-top_x-small">
            <article
                class="slds-card lightning-card slds-card_boundary slds-card_related-list-fix"
            >
                <div
                    class="slds-page-header slds-page-header_joined slds-page-header_bleed slds-shrink-none slds-is-relative slds-page-header-no-border"
                >
                    <header
                        class="slds-media slds-media_center slds-has-flexi-truncate"
                    >
                        <div class="slds-media__figure slds-m-right_small">
                            <lightning-icon
                                icon-name={state.iconName}
                                size="small"
                            ></lightning-icon>
                        </div>
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a
                                    class="slds-card__header-link"
                                    onclick={handleGotoRelatedList}
                                    >{state.title}</a
                                >
                            </h2>
                        </div>
                        <template if:true={showNewButton}>
                            <div class="slds-no-flex">
                                <lightning-button
                                    label="New"
                                    onclick={handleCreateRecord}
                                ></lightning-button>
                            </div>
                        </template>
                    </header>
                </div>

                <template if:true={hasRecords}>
                    <div>
                        <lightning-datatable
                            class="related-list"
                            onrowaction={handleRowAction}
                            columns={state.columns}
                            data={state.records}
                            key-field="Id"
                            hide-checkbox-column="true"
                            resize-column-disabled="true"
                        >
                        </lightning-datatable>
                    </div>
                    <template if:true={showViewAll}>
                        <footer class="slds-card__footer">
                            <a onclick={handleGotoRelatedList}>View All</a>
                        </footer>
                    </template>
                </template>
            </article>
        </lightning-layout>
    </template>
</template>
